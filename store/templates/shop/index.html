
{% extends 'shop/base.html' %}

{% block content %}
<div class="row">
    <div class="col-md-12">
        <form class="card card-sm">
            <div class="card-body row no-gutters align-items-center">
                <div class="col">
                     <input type="search"placeholder="veuillez saisir le produit rechercher" name="item-name" class="form-control form-control-borderless">
    
                </div>
                <div class="col-auto">
                    
                     <button type="submit" class="btn btn-success"> Recherche</button>
                </div>
                
            </div>
    
        </form>
    </div>
</div> 

<div class="row">
    <div class="col-md-12">
        <div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel">
  <div class="carousel-indicators">
    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="3" aria-label="Slide 4"></button>
    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="4" aria-label="Slide 5"></button>
    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="5" aria-label="Slide 6"></button>
    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="6" aria-label="Slide 7"></button>
    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="7" aria-label="Slide 8"></button>
    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="8" aria-label="Slide 9"></button>
    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="9" aria-label="Slide 10"></button>
    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="10" aria-label="Slide 11"></button>
    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="11" aria-label="Slide 12"></button>
    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="12" aria-label="Slide 13"></button>
  </div>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img src="https://idme-marketplace.s3.amazonaws.com/HVNEkTmnccXzKNhWHLSkFFRf" class="d-block w-100" alt="...">
      <div class="carousel-caption d-none d-md-block">
        <h1 class="text-dark">MARIESHOP</h1>
        <p class="text-sucess">Bienvenue a notre BOUTIQUE en ligne ,merci de votre visite !!</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="https://asset20.ckassets.com/blog/wp-content/uploads/sites/5/2021/12/Womens-Clothing.jpg" class="d-block w-100" alt="...">
      <div class="carousel-caption d-none d-md-block">
         <h1 class="text-dark">MARIESHOP</h1>
        <p class="text-sucess">Bienvenue a notre BOUTIQUE en ligne ,merci de votre visite !!</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="https://www.nozarrivages.com/wp-content/uploads/2019/09/habillement-pour-femme.jpg" class="d-block w-100" alt="...">
      <div class="carousel-caption d-none d-md-block">
         <h1 class="text-dark">MARIESHOP</h1>
        <p  class="text-sucess">Bienvenue a notre BOUTIQUE en ligne ,merci de votre visite !!</p>
      </div>
    </div>
     <div class="carousel-item">
      <img src="https://www.apple.com/fr/apple-watch-se/images/overview/hero/hero__fmx18j9bq0ya_large.jpg" class="d-block w-100" alt="...">
      <div class="carousel-caption d-none d-md-block">
         <h1 class="text-dark">MARIESHOP</h1>
        <p class="text-sucess">Bienvenue a notre BOUTIQUE en ligne ,merci de votre visite !!</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="https://www.nozarrivages.com/wp-content/uploads/2018/09/vetements-pour-femme-styles-et-trendy.jpg" class="d-block w-100" alt="...">
      <div class="carousel-caption d-none d-md-block">
       <h1 class="text-dark">MARIESHOP</h1>
        <p class="text-sucess">Bienvenue a notre BOUTIQUE en ligne ,merci de votre visite !!</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="https://mayamayowa.com/wp-content/uploads/2020/09/Vetement-femme-addiction-shopping-scaled.jpg" class="d-block w-100" alt="...">
      <div class="carousel-caption d-none d-md-block">
         <h1 class="text-dark">MARIESHOP</h1>
        <p class="text-sucess">Bienvenue a notre BOUTIQUE en ligne ,merci de votre visite !!</p>
      </div>
    </div>
     <div class="carousel-item">
      <img src="https://www.nozarrivages.com/wp-content/uploads/2019/05/articles-de-mode-pour-femme.jpg" class="d-block w-100" alt="...">
      <div class="carousel-caption d-none d-md-block">
         <h1 class="text-dark">MARIESHOP</h1>
        <p class="text-sucess">Bienvenue a notre BOUTIQUE en ligne ,merci de votre visite !!</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="https://io.dropinblog.com/uploaded/blogs/34245781/files/featured/vetement_fashion_homme.jpg" class="d-block w-100" alt="...">
      <div class="carousel-caption d-none d-md-block">
         <h1 class="text-dark">MARIESHOP</h1>
        <p class="text-sucess">Bienvenue a notre BOUTIQUE en ligne ,merci de votre visite !!</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="https://www.rienasemettre.fr/wp-content/uploads/2012/11/look-homme-business-mode-chic-casual-2016-2017.jpg" class="d-block w-100" alt="...">
      <div class="carousel-caption d-none d-md-block">
         <h1 class="text-dark">MARIESHOP</h1>
        <p class="text-sucess">Bienvenue a notre BOUTIQUE en ligne ,merci de votre visite !!</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="https://www.beloccasion.com/uploads/products/1598528487-pack-sac-a-main-femme-tre-s-chic-et-e-le-gant-avec-accessoires-sac-a-main-guess-maroc-sac-a-main-femme-zara-maroc-bershka-maroc-maroc-bon-prix-sac-sac-a-elle-stradivarius-maroc-chemise-femme-maroc.jpg" class="d-block w-100" alt="...">
      <div class="carousel-caption d-none d-md-block">
         <h1 class="text-dark">MARIESHOP</h1>
        <p class="text-sucess">Bienvenue a notre BOUTIQUE en ligne ,merci de votre visite !!</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="https://cdn.pixabay.com/photo/2016/04/08/18/46/shopping-mall-1316787_1280.jpg" class="d-block w-100" alt="...">
      <div class="carousel-caption d-none d-md-block">
         <h1 class="text-dark">MARIESHOP</h1>
        <p class="text-sucess">Bienvenue a notre BOUTIQUE en ligne ,merci de votre visite !!</p>
      </div>
    </div>
    <div class="carousel-item">
      <img src="https://s.alicdn.com/@sc04/kf/H6c400867aef64774abe6696d6c969f5fQ.jpg_960x960.jpg" class="d-block w-100" alt="...">
      <div class="carousel-caption d-none d-md-block">
         <h1 class="text-dark">MARIESHOP</h1>
        <p class="text-sucess">Bienvenue a notre BOUTIQUE en ligne ,merci de votre visite !!</p>
      </div>
    </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>
       
   </div>
</div> 
 <div class="container" data-aos="fade-up">
        <div class="row mt-5">
          <div class="col-lg-12 text-center mb-5">
            <h1 class="page-title">BIENVENUE A NOTRE BOUTIQUE , NOUS SOMMES LE MARCHE DIGITAL QUI VOUS SIMPLIFIE LA VIE.</h1>
            <h4> "ici le client est Roi"</h4>
          </div>
        </div>
<div class="row mt-2">
        {% for product in product_object %}
         <div class="col-md-3 mt-3">
             <div class="card md-2 me-4 thumbnail" >
                  <a href="{{ product.id }}"><img src="{{ product.image }}" class="card-img-top"></a>
                  <div class="card-body">
                     <div id="aa{{ product.id }}" class="card-title">{{product.title}}</div>
                      <div id="price{{ product.id }}" style="color:red" class="card-text">{{product.price}}</div>
                       <a href="{{ product.id }}" class="btn btn-warning">Details</a>
                       <button id="{{ product.id }}" class="btn ted btn-success" onclick="addToCart()">Ajouter</button>
                    </div>
                 </div>
                </div>
                {% endfor %}
            </div>
              <nav aria-label="Page navigation example">
          {% if is_paginated %}
  <ul class="pagination justify-content-center">
    {% if page_obj.has_previous %}
    <li class="page-item"><a class="page-link" href="{% url 'index'%}?page={{ page_obj.previous_page_number}}">Precedent</a></li>
   <li class="page-item"><a class="page-link" href="#">{{ page_obj.previous_page_number}}</a></li>
     {% endif %}
      
   <li class="page-item"><a class="page-link" href="#">{{ page_obj.number}}<span class="sr-only">(current)</span></a></li>
    {% if page_obj.has_next %}
    <li class="page-item"><a class="page-link" href="#">{{ page_obj.next_page_number}}</a></li>
    <li class="page-item"><a class="page-link" href="{% url 'index'%}?page={{ page_obj.next_page_number}}">Next</a></li>
    {% endif %}
  </ul>
   {% endif %}
</nav>
{% endblock %}

 {% block js %}
 {% comment %} la partie JavaScript pour le stockage local qui vas nous permettre de calculer la somme des produits commander {% endcomment %}
 <script type="text/javascript">
  function addToCart() {
    alert('Le produit a été ajouté au panier avec succès!');
  }
  console.log('juste pour tester');
       if(localStorage.getItem('panier') ==null ){
        var panier ={};
       }else{
        panier=JSON.parse(localStorage.getItem('panier'));
       }
       $(document).on('click','.ted',function(){
        console.log('Ajouter');
        var item_id=this.id.toString();
        console.log(item_id);
        if(panier[item_id] !=undefined){
          quantite = panier[item_id][0]+1;
          panier[item_id][0]=quantite;
          panier[item_id][2] += parseFloat(document.getElementById("price" + item_id).innerHTML)

        }else{
          quantite=1;
          prix=parseFloat(document.getElementById("price" + item_id).innerHTML);
          nom=document.getElementById("aa"+item_id).innerHTML;
          panier[item_id]=[quantite,nom,prix];

        }
        console.log(panier);
        localStorage.setItem('panier',JSON.stringify(panier));
        document.getElementById("panier").innerHTML="Panier("+Object.keys(panier).length+")";
    });
     
    AfficherList(panier);
    function AfficherList(panier){
      var panierString =" ";
      panierString +="<h5>Voila la liste de produits selectionnes!!!</h5>";
      var index = 1;
      for(var x in panier ){
        panierString += index;
        panierString += document.getElementById("aa"+x).innerHTML + " Quantitee: " + panier[x][0] + "</br>";
        index +=1;
    }
    panierString +="<a href='checkout' class='btn btn-primary' >Valider ma commande</a>";
    $('[data-toggle="popover"]').popover();
    document.getElementById('panier').setAttribute('data-content',panierString);
  }
 
 </script>

 {% endblock %}